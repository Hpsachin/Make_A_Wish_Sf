<apex:page standardController="Case" extensions="statusDisplayController" standardStylesheets="false" showHeader="false" >
    
    <apex:includeScript value="{!URLFOR($Resource.Resources, '/resources/js/jquery.js')}"/>
    <script>
    	$(function() {
            loadData();
            });
    </script>
    
    <style>
    	ul#status { font-family: 'Century Gothic', CenturyGothic, AppleGothic, sans-serif; width:auto; display:inline-block; list-style:none; margin:0 auto; padding:0; }
    	ul#status li { display:inline-block; text-align:center; color:#fff; height:40px; line-height:40px; padding:0px 16px; border-right:1px solid #fff; font-size:0.8em; } 
        
		ul#status li.full { background-color:#0069ba; }
        ul#status li.fade { background-color:#80b4dd; }
        
        ul#status li.arrow {background-color:#80b4dd;  width: 0;height: 0;padding:0;margin-bottom:-15px;margin-left:-1px;border-style: solid;border-width:20px 0 20px 10px;border-color: transparent transparent transparent #0069ba; }
        
        ul#status li:first-child { border-radius: 8px 0px 0px 8px; }
    	ul#status li:last-child { border-radius: 0px 8px 8px 0px; }
        
    </style>
    
    <apex:form id="statusForm">
        
        <apex:actionFunction name="loadData" reRender="statusPanel">
            <apex:param assignTo="{!statusValues}" value="Referral,Awaiting Application Completion,Application Received,Awaiting Consent,Awaiting Starlight,Starlight Complete,Converted Wish" name="statusValueString" />
        </apex:actionFunction>

        <apex:outputPanel id="statusPanel">
            <apex:variable value="{!ISBLANK(c.Status)}" var="reachStatus" />
            
<ul id="status">
            <apex:repeat value="{!Status}" var="s"> 
                
                <li class="{!IF(!reachStatus,'full','fade')}">
                    {!s}
                </li>
                
                <apex:outputText rendered="{!c.Status == s}">
                	<li class="arrow"></li>
                </apex:outputText>
                
                <apex:variable value="{!OR(reachStatus, c.Status == s)}" var="reachStatus" />
                
            </apex:repeat>
    </ul> 
                
        </apex:outputPanel>
        
    </apex:form>
        
</apex:page>